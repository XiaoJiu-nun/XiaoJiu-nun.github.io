---
title: ARM汇编
date: 
---

ARM汇编:

汇编中 [] 内的代表地址

例如 mov R0 , [R1]  表示将R1地址的值给到R0

**数据处理指令:**

1. MOV :  MOV r0, r1 //代表将r1寄存器的值给到r0
2. ADD : ADD r0，r1 //将r1与r0寄存器值相加，相加后的值存到r0
3. SUB ：SUB r0，r1 //将r1与r0寄存器值相减，相减后的值存到r0
4. AND : AND r0，r1 // 将 r1和r0寄存器进行与运算，运算后的值存到r0
5. ORR：ORR r0，r1  //将r1和r0寄存器值进行或运算，运算后的值存到r0
6. EOR：EOR r0，r1 //将r1和r0寄存器值进行异或运算，运算后的值存到r0
7. BIC ：bic R0,R0,#0x1F ；    //将R0最低5位清零，其余位不变。

**移位指令:**

1. LSL : LSL R0,R1 //将r0 左移R1位

2. LSR : LSR R0,R1 //将R0右移R1位

3. ROR :

   **算术移位 ASL、ASR**

   ASL 算术左移和 LSL 类似，主要是 ASR 有点细微区别

   ASR 算术右移中保持符号位不变，正数的话最高位补 0，负数最高位补 1

**跳转指令:**

1. B:跳转
2. BL:跳转且保存返回地址
3. blx/bx指令：带x，可以切换指令集

**比较指令**:

1.cmp：CMP R1,R0 //将R1与R0进行相减操作，相应标志位的改变

2.bne ：loc_1AC4 //两条指令的结果为:将R1与RO进行比较，当R1不等于R0时，将ZF位设为0，进行跳转

| 寄存器 |                作用                |                     说明                     |      |
| :----: | :--------------------------------: | :------------------------------------------: | ---- |
| R0-R3  | 普通寄存器，函数参数以及返回值传递 |                                              |      |
| R4-R6  |             普通寄存器             |                                              |      |
| R4-R11 |         主要保存局部变量，         | 在Thumb程序中，通常只能使用R4-R7保存局部变量 |      |
|  R13   |                 SP                 |                   栈顶指针                   |      |
|  R14   |                 LR                 |               存放函数返回地址               |      |
|  R15   |                 PC                 |                  程序计数器                  |      |
|  CPSR  |             状态寄存器             |              获取当前寄存器状态              |      |

**特殊说明:**R12 是临时寄存器，使用不需要保存

**调用约定**：

函数调用约定是指定函数的前四个参数存储在寄存器 R0-R3 中，当参数个数多于 4 个时，将多余的参数通过数据栈进行传递，入栈顺序与参数顺序正好相反，子程序返回前无需恢复 R0~R3 的值。

在子程序中，使用 R4 ～ R11 保存局部变量，若使用需要入栈保存，子程序返回前需要恢复这些寄存器；R12 是临时寄存器，使用不需要保存。 子程序返回 32 位的整数，使用 R0 返回；返回 64 位整数时，使用 R0 返回低位，R1 返回高位。
